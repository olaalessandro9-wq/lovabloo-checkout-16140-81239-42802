@tailwind base;
@tailwind components;
@tailwind utilities;

/* =====================================================
   EAGLE THEME SYSTEM — v3
   - Escopo explícito por tema (light/dark) + paleta
   - Evita "bleed" do :root[data-palette] no dark
   - Inclui --brand-rgb para fallback sem color-mix()
   ===================================================== */

/* 0) RESET de transições globais (evita flicker) */
* { transition: none; }
.sidebar-item, .btn, .chip, .card, .nav, .link { transition: background-color .16s, border-color .16s, color .16s; }

/* 1) BASES por tema (sempre ajustar via data-theme) */
:root[data-theme="light"] {
  --bg: #F6F7FB;
  --card: #FFFFFF;
  --text: #0A2540;
  --subtext: #475569;

  --brand: #0A2540;      /* placeholder; cada paleta refina */
  --brand-rgb: 10,37,64; /* RGB de #0A2540 */
  --brand-fg: #FFFFFF;
  --brand-subtle: #C8A951;

  --sidebar-bg: #F9FAFB;
  --sidebar-text: #1E293B;
  --sidebar-muted: #64748B;
  --sidebar-active: #E5E7EB;
  --sidebar-hover: #EEF2FF;
  --sidebar-border: #E5E7EB;
}

:root[data-theme="dark"] {
  --bg: #0B1220;
  --card: #0F172A;
  --text: #E5E7EB;
  --subtext: #94A3B8;

  --brand: #C8A951;
  --brand-rgb: 200,169,81; /* RGB de #C8A951 */
  --brand-fg: #0B1220;
  --brand-subtle: #2F3D57;

  --sidebar-bg: #111827;
  --sidebar-text: #F3F4F6;
  --sidebar-muted: #9CA3AF;
  --sidebar-active: #1F2937;
  --sidebar-hover: #0A2540;
  --sidebar-border: #1F2937;
}

/* 2) PALETAS — LIGHT (escopo explícito PARA o light) */
:root[data-theme="light"][data-palette="sky"] {
  --brand: #1E90FF;
  --brand-rgb: 30,144,255;
  --brand-subtle: #9FC9FF;

  --bg: #F7FAFF;
  --card: #FFFFFF;
  --text: #0F172A;
  --subtext: #475569;

  --sidebar-bg: #F8FAFF;
  --sidebar-text: #0F172A;
  --sidebar-muted: #64748B;
  --sidebar-active: #E6EEF9;
  --sidebar-hover: rgba(30,144,255,0.08);
  --sidebar-border: #E6EEF9;
}

/* Eagle (light) — mais frio e evidente */
:root[data-theme="light"][data-palette="eagle"] {
  --brand: #0A2540;
  --brand-rgb: 10,37,64;
  --brand-subtle: #C8A951;

  --bg: #EEF3F8;           /* + contraste */
  --card: #FFFFFF;
  --text: #0A2540;
  --subtext: #42566B;

  --sidebar-bg: #ECF2F8;
  --sidebar-text: #0A2540;
  --sidebar-muted: #55687E;
  --sidebar-active: #D9E3EE;
  --sidebar-hover: rgba(10,37,64,0.06);
  --sidebar-border: #D9E3EE;
}

/* Horizon (light) — mais quente/acinzentado, visível */
:root[data-theme="light"][data-palette="horizon"] {
  --brand: #243B53;
  --brand-rgb: 36,59,83;
  --brand-subtle: #B87333;

  --bg: #F4F6F9;
  --card: #FFFFFF;
  --text: #102131;
  --subtext: #41586B;

  --sidebar-bg: #F1F4F7;
  --sidebar-text: #102131;
  --sidebar-muted: #5A7084;
  --sidebar-active: #E3E9F0;
  --sidebar-hover: rgba(36,59,83,0.07);
  --sidebar-border: #E3E9F0;
}

/* 3) PALETAS — DARK (escopo explícito PARA o dark) */
:root[data-theme="dark"][data-palette="sky"] {
  --brand: #9FC9FF;
  --brand-rgb: 159,201,255;
  --brand-subtle: #1E90FF;

  --bg: #0A1020;
  --card: #0D1428;
  --text: #E6ECFE;
  --subtext: #A6B3D9;

  --sidebar-bg: #0E162B;
  --sidebar-text: #E6ECFE;
  --sidebar-muted: #A6B3D9;
  --sidebar-active: #182447;
  --sidebar-hover: rgba(30,144,255,0.15);
  --sidebar-border: #182447;
}

/* Eagle (dark) — dourado sutil + petróleo */
:root[data-theme="dark"][data-palette="eagle"] {
  --brand: #C8A951;
  --brand-rgb: 200,169,81;
  --brand-subtle: #2F3D57;

  --bg: #0B1220;
  --card: #0F172A;
  --text: #E5E7EB;
  --subtext: #9FB2C9;

  --sidebar-bg: #101723;
  --sidebar-text: #E5E7EB;
  --sidebar-muted: #9FB2C9;
  --sidebar-active: #1A2535;
  --sidebar-hover: rgba(200,169,81,0.18);
  --sidebar-border: #1A2535;
}

/* Horizon (dark) — cobre como acento */
:root[data-theme="dark"][data-palette="horizon"] {
  --brand: #B87333;
  --brand-rgb: 184,115,51;
  --brand-subtle: #243B53;

  --bg: #0B1119;
  --card: #0E1621;
  --text: #E6ECF5;
  --subtext: #9BB0C8;

  --sidebar-bg: #0F1926;
  --sidebar-text: #E6ECF5;
  --sidebar-muted: #9BB0C8;
  --sidebar-active: #1A2637;
  --sidebar-hover: rgba(184,115,51,0.18);
  --sidebar-border: #1A2637;
}

/* 4) FORMS — legibilidade no dark (sem color-mix) */
:root[data-theme="dark"] input,
:root[data-theme="dark"] select,
:root[data-theme="dark"] textarea {
  color: var(--text) !important;
  background-color: var(--card) !important;
  border-color: var(--sidebar-border) !important;
  caret-color: var(--text) !important;
}
:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder {
  color: var(--subtext) !important;
  opacity: .9;
}
:root[data-theme="dark"] input:focus,
:root[data-theme="dark"] select:focus,
:root[data-theme="dark"] textarea:focus {
  outline: none;
  /* ring sem color-mix */
  box-shadow: 0 0 0 2px rgba(var(--brand-rgb), .35) inset, 0 0 0 2px rgba(var(--brand-rgb), .4);
  border-color: var(--brand) !important;
}

/* Autofill (Chromium) */
:root[data-theme="dark"] input:-webkit-autofill,
:root[data-theme="dark"] textarea:-webkit-autofill,
:root[data-theme="dark"] select:-webkit-autofill {
  -webkit-text-fill-color: var(--text) !important;
  transition: background-color 9999s ease-in-out 0s;
  box-shadow: 0 0 0px 1000px var(--card) inset !important;
  caret-color: var(--text) !important;
}

/* 5) Neutralização de classes hardcoded no dark */
:root[data-theme="dark"] .bg-white,
:root[data-theme="dark"] .bg-neutral-50 { background-color: var(--card) !important; }
:root[data-theme="dark"] .text-black,
:root[data-theme="dark"] .text-zinc-900 { color: var(--text) !important; }
