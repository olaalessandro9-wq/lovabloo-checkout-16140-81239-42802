/* =====================================================
   THEME BUNDLE v3.3 — Eagle Vision
   - 1 arquivo único para evitar ordem/imports
   - Suporta data-theme no :root, html OU body
   - 3 paletas × 2 temas + hotfixes (v3.1 + v3.2)
   ===================================================== */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- Transições razoáveis ---------- */
* { transition: none; }
.sidebar-item, .btn, .chip, .card, .nav, .link {
  transition: background-color .16s, border-color .16s, color .16s;
}

/* ---------- BASE LIGHT ---------- */
:root[data-theme="light"], html[data-theme="light"], body[data-theme="light"] {
  --bg:#F6F7FB; --card:#FFF; --text:#0A2540; --subtext:#475569;
  --brand:#0A2540; --brand-rgb:10,37,64; --brand-fg:#FFF; --brand-subtle:#C8A951;
  --sidebar-bg:#F9FAFB; --sidebar-text:#1E293B; --sidebar-muted:#64748B;
  --sidebar-active:#E5E7EB; --sidebar-hover:#EEF2FF; --sidebar-border:#E5E7EB;
}

/* ---------- BASE DARK ---------- */
:root[data-theme="dark"], html[data-theme="dark"], body[data-theme="dark"] {
  --bg:#0B1220; --card:#0F172A; --text:#E5E7EB; --subtext:#94A3B8;
  --brand:#C8A951; --brand-rgb:200,169,81; --brand-fg:#0B1220; --brand-subtle:#2F3D57;
  --sidebar-bg:#111827; --sidebar-text:#F3F4F6; --sidebar-muted:#9CA3AF;
  --sidebar-active:#1F2937; --sidebar-hover:#0A2540; --sidebar-border:#1F2937;
}

/* ---------- PALETAS: LIGHT ---------- */
:root[data-theme="light"][data-palette="sky"],
html[data-theme="light"][data-palette="sky"],
body[data-theme="light"][data-palette="sky"]{
  --brand:#1E90FF; --brand-rgb:30,144,255; --brand-subtle:#9FC9FF;
  --bg:#F7FAFF; --card:#FFF; --text:#0F172A; --subtext:#475569;
  --sidebar-bg:#F8FAFF; --sidebar-text:#0F172A; --sidebar-muted:#64748B;
  --sidebar-active:#E6EEF9; --sidebar-hover:rgba(30,144,255,.08); --sidebar-border:#E6EEF9;
}

:root[data-theme="light"][data-palette="eagle"],
html[data-theme="light"][data-palette="eagle"],
body[data-theme="light"][data-palette="eagle"]{
  --brand:#0A2540; --brand-rgb:10,37,64; --brand-subtle:#C8A951;
  --bg:#EEF3F8; --card:#FFF; --text:#0A2540; --subtext:#42566B;
  --sidebar-bg:#ECF2F8; --sidebar-text:#0A2540; --sidebar-muted:#55687E;
  --sidebar-active:#D9E3EE; --sidebar-hover:rgba(10,37,64,.06); --sidebar-border:#D9E3EE;
}

:root[data-theme="light"][data-palette="horizon"],
html[data-theme="light"][data-palette="horizon"],
body[data-theme="light"][data-palette="horizon"]{
  --brand:#243B53; --brand-rgb:36,59,83; --brand-subtle:#B87333;
  --bg:#F4F6F9; --card:#FFF; --text:#102131; --subtext:#41586B;
  --sidebar-bg:#F1F4F7; --sidebar-text:#102131; --sidebar-muted:#5A7084;
  --sidebar-active:#E3E9F0; --sidebar-hover:rgba(36,59,83,.07); --sidebar-border:#E3E9F0;
}

/* ---------- PALETAS: DARK ---------- */
:root[data-theme="dark"][data-palette="sky"],
html[data-theme="dark"][data-palette="sky"],
body[data-theme="dark"][data-palette="sky"]{
  --brand:#9FC9FF; --brand-rgb:159,201,255; --brand-subtle:#1E90FF;
  --bg:#0A1020; --card:#0D1428; --text:#E6ECFE; --subtext:#A6B3D9;
  --sidebar-bg:#0E162B; --sidebar-text:#E6ECFE; --sidebar-muted:#A6B3D9;
  --sidebar-active:#182447; --sidebar-hover:rgba(30,144,255,.15); --sidebar-border:#182447;
}

:root[data-theme="dark"][data-palette="eagle"],
html[data-theme="dark"][data-palette="eagle"],
body[data-theme="dark"][data-palette="eagle"]{
  --brand:#C8A951; --brand-rgb:200,169,81; --brand-subtle:#2F3D57;
  --bg:#0B1220; --card:#0F172A; --text:#E5E7EB; --subtext:#9FB2C9;
  --sidebar-bg:#101723; --sidebar-text:#E5E7EB; --sidebar-muted:#9FB2C9;
  --sidebar-active:#1A2535; --sidebar-hover:rgba(200,169,81,.18); --sidebar-border:#1A2535;
}

:root[data-theme="dark"][data-palette="horizon"],
html[data-theme="dark"][data-palette="horizon"],
body[data-theme="dark"][data-palette="horizon"]{
  --brand:#B87333; --brand-rgb:184,115,51; --brand-subtle:#243B53;
  --bg:#0B1119; --card:#0E1621; --text:#E6ECF5; --subtext:#9BB0C8;
  --sidebar-bg:#0F1926; --sidebar-text:#E6ECF5; --sidebar-muted:#9BB0C8;
  --sidebar-active:#1A2637; --sidebar-hover:rgba(184,115,51,.18); --sidebar-border:#1A2637;
}

/* ---------- FORMS — DARK LEGÍVEL ---------- */
:root[data-theme="dark"] input,
:root[data-theme="dark"] select,
:root[data-theme="dark"] textarea,
html[data-theme="dark"] input,
html[data-theme="dark"] select,
html[data-theme="dark"] textarea,
body[data-theme="dark"] input,
body[data-theme="dark"] select,
body[data-theme="dark"] textarea{
  color:var(--text)!important; background-color:var(--card)!important;
  border-color:var(--sidebar-border)!important; caret-color:var(--text)!important;
}
:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder,
html[data-theme="dark"] input::placeholder,
html[data-theme="dark"] textarea::placeholder,
body[data-theme="dark"] input::placeholder,
body[data-theme="dark"] textarea::placeholder{ color:var(--subtext)!important; opacity:.9; }
:root[data-theme="dark"] input:focus,
:root[data-theme="dark"] select:focus,
:root[data-theme="dark"] textarea:focus,
html[data-theme="dark"] input:focus,
html[data-theme="dark"] select:focus,
html[data-theme="dark"] textarea:focus,
body[data-theme="dark"] input:focus,
body[data-theme="dark"] select:focus,
body[data-theme="dark"] textarea:focus{
  outline:none;
  box-shadow:0 0 0 2px rgba(var(--brand-rgb), .35) inset, 0 0 0 2px rgba(var(--brand-rgb), .4);
  border-color:var(--brand)!important;
}

/* ---------- NEUTRALIZAÇÃO: textos/ícones pretos no dark (v3.1 + v3.2) ---------- */
:root[data-theme="dark"] :where(
  .text-black,.text-gray-900,.text-zinc-900,.text-slate-900,.text-neutral-900,
  .text-gray-800,.text-zinc-800,.text-slate-800,.text-neutral-800,
  .text-blue-900,.text-indigo-900,.text-sky-900,.text-stone-900
),
html[data-theme="dark"] :where(
  .text-black,.text-gray-900,.text-zinc-900,.text-slate-900,.text-neutral-900,
  .text-gray-800,.text-zinc-800,.text-slate-800,.text-neutral-800,
  .text-blue-900,.text-indigo-900,.text-sky-900,.text-stone-900
),
body[data-theme="dark"] :where(
  .text-black,.text-gray-900,.text-zinc-900,.text-slate-900,.text-neutral-900,
  .text-gray-800,.text-zinc-800,.text-slate-800,.text-neutral-800,
  .text-blue-900,.text-indigo-900,.text-sky-900,.text-stone-900
){ color:var(--text)!important; }

/* libs (prefixos) */
:root[data-theme="dark"] :where([class^="rdt_"],[class^="mantine-"],[class^="chakra-"],[class^="recharts-"],[class^="rc-"]),
html[data-theme="dark"] :where([class^="rdt_"],[class^="mantine-"],[class^="chakra-"],[class^="recharts-"],[class^="rc-"]),
body[data-theme="dark"] :where([class^="rdt_"],[class^="mantine-"],[class^="chakra-"],[class^="recharts-"],[class^="rc-"]){
  color:var(--text)!important;
}

:root[data-theme="dark"] :where([class^="rdt_"] thead th),
html[data-theme="dark"] :where([class^="rdt_"] thead th),
body[data-theme="dark"] :where([class^="rdt_"] thead th){
  color:var(--subtext)!important; border-bottom-color:var(--sidebar-border)!important;
}
:root[data-theme="dark"] :where([class^="rdt_"] tbody td),
html[data-theme="dark"] :where([class^="rdt_"] tbody td),
body[data-theme="dark"] :where([class^="rdt_"] tbody td){
  color:var(--text)!important; border-bottom-color:rgba(255,255,255,.06)!important;
}

/* svg */
:root[data-theme="dark"] :where(svg text), html[data-theme="dark"] :where(svg text), body[data-theme="dark"] :where(svg text){ fill:var(--text)!important; }
:root[data-theme="dark"] :where(.fill-black), html[data-theme="dark"] :where(.fill-black), body[data-theme="dark"] :where(.fill-black){ fill:var(--text)!important; }
:root[data-theme="dark"] :where(.stroke-black), html[data-theme="dark"] :where(.stroke-black), body[data-theme="dark"] :where(.stroke-black){ stroke:var(--text)!important; }

/* fundos/bordas claras */
:root[data-theme="dark"] :where(.bg-white,.bg-gray-50,.bg-zinc-50,.bg-slate-50,.bg-neutral-50),
html[data-theme="dark"] :where(.bg-white,.bg-gray-50,.bg-zinc-50,.bg-slate-50,.bg-neutral-50),
body[data-theme="dark"] :where(.bg-white,.bg-gray-50,.bg-zinc-50,.bg-slate-50,.bg-neutral-50){ background-color:var(--card)!important; }
:root[data-theme="dark"] :where(.border-gray-200,.border-zinc-200,.border-slate-200,.border-neutral-200),
html[data-theme="dark"] :where(.border-gray-200,.border-zinc-200,.border-slate-200,.border-neutral-200),
body[data-theme="dark"] :where(.border-gray-200,.border-zinc-200,.border-slate-200,.border-neutral-200){ border-color:var(--sidebar-border)!important; }

/* inline color: black / #000 / rgb(0,0,0) */
:root[data-theme="dark"] :where([style*="color:black"],[style*="color: black"],[style*="color:#000"],[style*="color: #000"],[style*="color:rgb(0,0,0)"],[style*="color: rgb(0, 0, 0)"],[style*="color:rgba(0,0,0"],[style*="color: rgba(0, 0, 0"]),
html[data-theme="dark"] :where([style*="color:black"],[style*="color: black"],[style*="color:#000"],[style*="color: #000"],[style*="color:rgb(0,0,0)"],[style*="color: rgb(0, 0, 0)"],[style*="color:rgba(0,0,0"],[style*="color: rgba(0, 0, 0"]),
body[data-theme="dark"] :where([style*="color:black"],[style*="color: black"],[style*="color:#000"],[style*="color: #000"],[style*="color:rgb(0,0,0)"],[style*="color: rgb(0, 0, 0)"],[style*="color:rgba(0,0,0"],[style*="color: rgba(0, 0, 0"]){ color:var(--text)!important; }

/* buttons outline/ghost */
:root[data-theme="dark"] :where(.btn-outline,.btn-ghost,.variant-ghost),
html[data-theme="dark"] :where(.btn-outline,.btn-ghost,.variant-ghost),
body[data-theme="dark"] :where(.btn-outline,.btn-ghost,.variant-ghost){ color:var(--text)!important; border-color:var(--sidebar-border)!important; background-color:transparent!important; }
:root[data-theme="dark"] :where(.btn-outline:hover,.btn-ghost:hover,.variant-ghost:hover),
html[data-theme="dark"] :where(.btn-outline:hover,.btn-ghost:hover,.variant-ghost:hover),
body[data-theme="dark"] :where(.btn-outline:hover,.btn-ghost:hover,.variant-ghost:hover){ background-color:rgba(var(--brand-rgb), .12)!important; color:var(--text)!important; }

/* labels */
:root[data-theme="dark"] :where(label,.form-label,.field-label),
html[data-theme="dark"] :where(label,.form-label,.field-label),
body[data-theme="dark"] :where(label,.form-label,.field-label){ color:var(--subtext)!important; }

/* tables */
:root[data-theme="dark"] :where(table thead th),
html[data-theme="dark"] :where(table thead th),
body[data-theme="dark"] :where(table thead th){ color:var(--subtext)!important; border-bottom-color:var(--sidebar-border)!important; }
:root[data-theme="dark"] :where(table tbody td),
html[data-theme="dark"] :where(table tbody td),
body[data-theme="dark"] :where(table tbody td){ color:var(--text)!important; border-bottom-color:rgba(255,255,255,.06)!important; }
